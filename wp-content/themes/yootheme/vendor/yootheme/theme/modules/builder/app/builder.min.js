(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1:function(e,t){e.exports=UIkit.util},241:function(e,t,i){"use strict";i.r(t);var n=i(3),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{on:{submit:function(t){t.preventDefault(),e.$emit("resolve",e.node)}}},[i("div",{staticClass:"uk-modal-header"},[i("h2",{staticClass:"uk-modal-title"},[e._v(e._s(e.edit?e.$t("Edit %type%",{type:e.title}):e.$t("Save %type%",{type:e.title})))])]),e._v(" "),i("div",{staticClass:"uk-modal-body uk-form-stacked"},[i("label",{staticClass:"uk-form-label",attrs:{for:"form-element-save-name"}},[e._v(e._s(e.$t("Name")))]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.node.name,expression:"node.name"}],staticClass:"uk-input",attrs:{id:"form-element-save-name",placeholder:e.type.title,type:"text",required:"",autofocus:""},domProps:{value:e.node.name},on:{input:function(t){t.target.composing||e.$set(e.node,"name",t.target.value)}}}),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!e.edit&&e.exists,expression:"!edit && exists"}],staticClass:"uk-text-muted uk-margin-small"},[e._v(e._s(e.$t('"%name%" already exists in library, it will be overwritten when saving.',{name:e.node.name})))])]),e._v(" "),i("div",{staticClass:"uk-modal-footer uk-text-right"},[i("button",{staticClass:"uk-button uk-button-text uk-modal-close uk-margin-small-right",attrs:{type:"button"}},[e._v(e._s(e.$t("Cancel")))]),e._v(" "),i("button",{staticClass:"uk-button uk-button-primary"},[e._v(e._s(e.$t("Save")))])])])};a._withStripped=!0;var r={name:"ElementModal",inject:["Library"],props:{edit:{type:Boolean,default:!1},node:{type:Object,required:!0},builder:{type:Object,required:!0}},computed:{type:function(){return this.builder.type(this.node)},title:function(){return this.type.element?"Element":this.type.title||this.node.type},exists:function(){return"layout"===this.node.type&&this.Library.findElement(this.node.name)}},created:function(){this.edit||(this.node.name="")}},o=i(0),s=Object(o.a)(r,a,[],!1,null,null,null);s.options.__file="node_modules/@yootheme/packages/builder/src/components/ElementModal.vue";var u=s.exports,l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Switcher",{attrs:{tabs:["my layouts","pro layouts"]},on:{show:e.show}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!e.builder.empty,expression:"!builder.empty"}],staticClass:"uk-button uk-button-primary",attrs:{slot:"header-right",type:"button"},on:{click:function(t){e.$trigger("saveNode",[e.builder.node,e.builder],!0)}},slot:"header-right"},[e._v(e._s(e.$t("Save Layout")))]),e._v(" "),i("div",{staticClass:"uk-modal-body",attrs:{slot:"my layouts","uk-overflow-auto":""},slot:"my layouts"},[e.isEmpty(e.Library.layouts)?i("p",{staticClass:"uk-h1 uk-text-muted uk-text-center"},[e._v(e._s(e.$t("No layout found.")))]):i("table",{staticClass:"uk-table uk-table-divider uk-table-small uk-table-hover"},[i("thead",[i("tr",[i("th",{staticClass:"uk-table-expand"},[e._v(e._s(e.$t("Name")))]),e._v(" "),i("th",{staticClass:"uk-width-medium"},[e._v(e._s(e.$t("Type")))]),e._v(" "),i("th",{staticClass:"uk-table-shrink"})])]),e._v(" "),i("tbody",e._l(e.orderBy(e.Library.layouts,"name"),function(t){return i("tr",{staticClass:"uk-visible-toggle"},[i("td",{staticClass:"uk-table-link"},[i("a",{staticClass:"uk-link-reset",on:{click:function(i){e.select(t)}}},[i("span",{staticClass:"uk-text-muted uk-preserve-width uk-margin-small-right",attrs:{"uk-icon":"layout"==t.type?"copy":"file"}}),e._v("\n                                "+e._s(t.name)+"\n                            ")])]),e._v(" "),i("td",[e._v(e._s(e.startCase(t.type)))]),e._v(" "),i("td",[i("ul",{staticClass:"uk-iconnav uk-flex-nowrap uk-invisible-hover"},[i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Edit"),"uk-icon":"pencil","uk-tooltip":"delay: 500"},on:{click:function(i){e.Library.editElement(t,e.builder)}}})]),e._v(" "),i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Delete"),"uk-icon":"trash","uk-tooltip":"delay: 500"},on:{click:function(i){e.Library.deleteElement(t,e.builder)}}})])])])])}))])]),e._v(" "),i("div",{staticClass:"uk-modal-body",attrs:{slot:"pro layouts","uk-overflow-auto":""},slot:"pro layouts"},[i("Layouts",{attrs:{library:e.Library},on:{load:e.load,select:e.select}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.builder.empty,expression:"!builder.empty"}],staticClass:"uk-modal-footer"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.replace,expression:"replace"}],staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.replace)?e._i(e.replace,null)>-1:e.replace},on:{change:function(t){var i=e.replace,n=t.target,a=!!n.checked;if(Array.isArray(i)){var r=e._i(i,null);n.checked?r<0&&(e.replace=i.concat([null])):r>-1&&(e.replace=i.slice(0,r).concat(i.slice(r+1)))}else e.replace=a}}}),e._v(" "+e._s(e.$t("Replace existing content")))])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.builder.empty,expression:"builder.empty"}],staticClass:"uk-modal-footer uk-text-right"},[i("a",{staticClass:"uk-button uk-button-primary",on:{click:function(t){t.preventDefault(),e.select()}}},[e._v(e._s(e.$t("Start Empty")))])])],1)};l._withStripped=!0;var c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"uk-grid-small uk-child-width-auto",attrs:{"uk-grid":""}},[e.options("layout")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.filter.layout,expression:"filter.layout"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filter,"layout",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("All layouts")))]),e._v(" "),e._l(e.options("layout"),function(t){var n=t.value,a=t.text;return i("option",{key:n,domProps:{value:n}},[e._v(e._s(a))])})],2)]):e._e(),e._v(" "),e.options("topic")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.filter.topic,expression:"filter.topic"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filter,"topic",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("All topics")))]),e._v(" "),e._l(e.options("topic"),function(t){var n=t.value,a=t.text;return i("option",{key:n,domProps:{value:n}},[e._v(e._s(a))])})],2)]):e._e(),e._v(" "),e.options("type")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.filter.type,expression:"filter.type"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filter,"type",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("All types")))]),e._v(" "),e._l(e.options("type"),function(t){var n=t.value,a=t.text;return i("option",{key:n,domProps:{value:n}},[e._v(e._s(a))])})],2)]):e._e(),e._v(" "),e.options("website")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.filter.website,expression:"filter.website"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.filter,"website",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v(e._s(e.$t("All websites")))]),e._v(" "),e._l(e.options("website"),function(t){var n=t.value,a=t.text;return i("option",{key:n,domProps:{value:n}},[e._v(e._s(a))])})],2)]):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.some(e.filter),expression:"some(filter)"}]},[i("button",{staticClass:"uk-button uk-button-default",attrs:{type:"button"},on:{click:function(t){e.filter=e.reset()}}},[e._v(e._s(e.$t("Reset")))])])]),e._v(" "),i("ul",{staticClass:"uk-grid-medium uk-grid-match uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m",attrs:{"uk-grid":""}},e._l(e.filtered,function(t){return i("li",[i("div",{staticClass:"uk-panel uk-box-shadow-medium uk-box-shadow-hover-large uk-transition-toggle"},[t.meta.image?i("div",{directives:[{name:"lazy-background",rawName:"v-lazy-background",value:{src:e.$url(t.meta.image)},expression:"{src: $url(layout.meta.image)}"}],staticClass:"uk-background-cover uk-background-top-center uk-position-cover"}):i("div",{staticClass:"uk-background-cover uk-position-cover yo-finder-thumbnail-file"}),e._v(" "),i("canvas",{attrs:{width:"800",height:"1000"}}),e._v(" "),i("div",{staticClass:"uk-label yo-label uk-position-top-right uk-position-small uk-transition-fade"},[e._v(e._s(e.filter.layout?t.meta.topic+" / "+t.meta.type:t.meta.layout))]),e._v(" "),e.loading==t?i("div",{staticClass:"uk-overlay uk-overlay-primary uk-position-cover uk-flex uk-flex-center uk-flex-middle"},[e.error?i("div",{staticClass:"uk-text-danger"},[i("span",{attrs:{"uk-icon":"warning"}}),e._v(" "),i("span",{staticClass:"uk-margin-small-left"},[e._v(e._s(e.$t(e.error)))])]):i("span",{attrs:{"uk-spinner":""}})]):e._e(),e._v(" "),i("a",{staticClass:"uk-position-cover",attrs:{href:""},on:{click:function(i){i.preventDefault(),e.select(t)}}})])])}))])};c._withStripped=!0;var d=i(134),v=i(148),p=i(356),f=i(360),m=i(336),h=i(334),b=i(337),y="builder.layouts.filter",k={directives:{LazyBackground:d.a},props:{library:{type:Object,required:!0}},data:function(e){var t=e.reset;return{error:"",loading:null,layouts:[],filter:v.i[y]?JSON.parse(v.i[y]):t()}},computed:{filtered:function(){var e=this;return this.layouts.filter(function(t){var i=t.meta;return Object(p.a)(e.filter,function(e,t){return!e||i[t]===e})})}},watch:{filter:{handler:function(e){v.i[y]=JSON.stringify(e)},deep:!0}},created:function(){var e=this;this.library.getLayouts().then(function(t){return e.$emit("load",e.layouts=t)})},methods:{some:f.a,reset:function(){return{layout:"",type:"",topic:"",website:""}},select:function(e){var t=this;this.error="",this.loading=e,this.library.getLayout(e).then(function(e){return t.$emit("select",e)},function(e){var i=e.data;return t.error=i})},options:function(e){var t=Object(m.a)(this.layouts.filter(function(t){return t.meta[e]}),function(t){return t.meta[e]});return(t=Object(h.a)(t,function(e,t){return{value:t,text:t.replace(/\b\w/g,function(e){return e.toUpperCase()})}})).length?Object(b.a)(t,"text"):null}}},g=Object(o.a)(k,c,[],!1,null,null,null);g.options.__file="node_modules/@yootheme/packages/builder/src/components/Layouts.vue";var _=g.exports,w=i(251),x=i(332),$=i(345),C=i(105);var O=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),j=i(19),B=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,E=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var N=function(e){return(e=Object(j.a)(e))&&e.replace(B,O).replace(E,"")},L=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var S=function(e){return e.match(L)||[]},A=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var D=function(e){return A.test(e)},P="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",z="["+P+"]",T="\\d+",I="[\\u2700-\\u27bf]",M="[a-z\\xdf-\\xf6\\xf8-\\xff]",U="[^\\ud800-\\udfff"+P+T+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",R="(?:\\ud83c[\\udde6-\\uddff]){2}",Z="[\\ud800-\\udbff][\\udc00-\\udfff]",q="[A-Z\\xc0-\\xd6\\xd8-\\xde]",J="(?:"+M+"|"+U+")",F="(?:"+q+"|"+U+")",Y="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",G="[\\ufe0e\\ufe0f]?"+Y+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",R,Z].join("|")+")[\\ufe0e\\ufe0f]?"+Y+")*"),H="(?:"+[I,R,Z].join("|")+")"+G,V=RegExp([q+"?"+M+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[z,q,"$"].join("|")+")",F+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[z,q+J,"$"].join("|")+")",q+"?"+J+"+(?:['’](?:d|ll|m|re|s|t|ve))?",q+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",T,H].join("|"),"g");var K=function(e){return e.match(V)||[]};var W=function(e,t,i){return e=Object(j.a)(e),void 0===(t=i?void 0:t)?D(e)?K(e):S(e):e.match(t)||[]},Q=RegExp("['’]","g");var X=function(e){return function(t){return Object(C.a)(W(N(t).replace(Q,"")),e,"")}},ee=i(254),te=X(function(e,t,i){return e+(i?" ":"")+Object(ee.a)(t)}),ie={name:"LayoutsModal",components:{Layouts:_,Switcher:w.a},inject:["Library","Modal"],props:{builder:{type:Object,required:!0}},data:function(){return{layouts:[],replace:!0}},methods:{isEmpty:x.a,orderBy:$.a,startCase:te,show:function(e,t){this.Modal.width=1!==t?"xxlarge":"",this.Modal.container=1===t},load:function(e){this.layouts=e},select:function(e){e||((e=this.builder.make("layout")).children=[this.builder.make("section")]),this.Modal.resolve({node:e,replace:this.replace})}}},ne=Object(o.a)(ie,l,[],!1,null,null,null);ne.options.__file="node_modules/@yootheme/packages/builder/src/components/LayoutsModal.vue";var ae=ne.exports,re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Switcher",{attrs:{tabs:["new","my elements"]}},[i("div",{staticClass:"uk-modal-body uk-grid-collapse uk-child-width-1-6",attrs:{slot:"new","uk-grid":""},slot:"new"},e._l(e.filter(e.builder.types,{element:!0}),function(t){var n=t.name,a=t.title,r=t.icon;return i("div",[i("div",{staticClass:"uk-card uk-card-body uk-card-hover yo-panel uk-padding-remove-horizontal uk-text-center"},[i("img",{staticClass:"uk-svg",attrs:{alt:a,src:r,"uk-svg":""}}),e._v(" "),i("p",{staticClass:"uk-margin-small-top uk-margin-remove-bottom uk-text-truncate"},[e._v(e._s(a))]),e._v(" "),i("a",{staticClass:"uk-position-cover",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.$emit("resolve",e.builder.make(n))}}})])])})),e._v(" "),i("div",{staticClass:"uk-modal-body",attrs:{slot:"my elements"},slot:"my elements"},[e.isEmpty(e.Library.elements)?i("p",{staticClass:"uk-h1 uk-text-muted uk-text-center"},[e._v(e._s(e.$t("No elements found.")))]):i("table",{staticClass:"uk-table uk-table-divider uk-table-small uk-table-hover"},[i("thead",[i("tr",[i("th",{staticClass:"uk-table-expand"},[e._v(e._s(e.$t("Name")))]),e._v(" "),i("th",{staticClass:"uk-width-medium"},[e._v(e._s(e.$t("Type")))]),e._v(" "),i("th",{staticClass:"uk-table-shrink"})])]),e._v(" "),i("tbody",e._l(e.orderBy(e.Library.elements,"name"),function(t){return i("tr",{staticClass:"uk-visible-toggle"},[i("td",{staticClass:"uk-table-link"},[i("a",{staticClass:"uk-link-reset",attrs:{href:""},on:{click:function(i){i.preventDefault(),e.$emit("resolve",e.builder.clone(t))}}},[i("img",{staticClass:"uk-text-muted uk-preserve-width uk-margin-small-right",attrs:{alt:t.name,src:e.type(t).iconSmall,"uk-svg":""}}),e._v("\n                            "+e._s(t.name)+"\n                        ")])]),e._v(" "),i("td",[e._v(e._s(e.type(t).title))]),e._v(" "),i("td",[i("ul",{staticClass:"uk-iconnav uk-flex-nowrap uk-invisible-hover"},[i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Edit"),href:"","uk-icon":"pencil","uk-tooltip":"delay: 500"},on:{click:function(i){i.preventDefault(),e.Library.editElement(t,e.builder)}}})]),e._v(" "),i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:e.$t("Delete"),href:"","uk-icon":"trash","uk-tooltip":"delay: 500"},on:{click:function(i){i.preventDefault(),e.Library.deleteElement(t,e.builder)}}})])])])])}))])])])};re._withStripped=!0;var oe=i(359),se={name:"ElementsModal",components:{Switcher:w.a},inject:["Library"],props:{builder:{type:Object,required:!0}},methods:{filter:oe.a,isEmpty:x.a,orderBy:$.a,type:function(e){return this.builder.type(e)||{}}}},ue=Object(o.a)(se,re,[],!1,null,null,null);ue.options.__file="node_modules/@yootheme/packages/builder/src/components/ElementsModal.vue";var le=ue.exports,ce=i(339);var de=function(e,t,i){var n;return i(e,function(e,i,a){if(t(e,i,a))return n=i,!1}),n},ve=i(58),pe=i(8);var fe=function(e,t){return de(e,Object(pe.a)(t,3),ve.a)},me=i(361),he=i(9),be=i(83),ye=i(133),ke=i(340),ge={name:"LibraryModel",data:function(){return{library:{}}},computed:{layouts:function(){return Object(ce.a)(this.library,function(e){var t=e.type;return["layout","section"].indexOf(t)>=0})},elements:function(){return Object(ce.a)(this.library,function(e){var t=e.type;return["layout","section"].indexOf(t)<0})}},config:["api","apikey"],created:function(){this.$trigger("initLibrary",this.library)},methods:{getLayout:function(e){var t=e.link;return this.$http.get(t,{params:{key:this.$config.apikey}}).then(function(e){return e.json()})},getLayouts:function(){return this.$http.get(this.$config.api+"/layout").then(function(e){return e.json()})},findElement:function(e){return fe(this.library,{name:e})},saveElement:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(v.j)();return this.$trigger("saveElement",[e,i],!0).then(function(){return t.$set(t.library,i,e),e})},deleteElement:function(e,t){var i=this;return this.$trigger("deleteElement",[e,this.findElement(e.name)],!0).then(function(){return i.library=Object(ce.a)(i.library,function(t){return t!==e}),e})},editElement:function(e,t){var i=this;return this.$modal(u,{node:t.clone(e),builder:t,edit:!0}).show({width:"xlarge"}).then(function(t){return t?i.saveElement(t,i.findElement(e.name)):t})}},events:{openLibrary:function(e,t){return this.$modal(ae,{builder:t}).show({width:"xxlarge"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.node,n=e.replace;if(i){var a=i=t.clone(i),r=a.type,o=a.images;return n?t.set("layout"===r?i:{type:"layout",children:[i]}):t.append(t.node,"layout"===r?i.children:i),o&&function e(t,i){return Object(me.a)(t,function(n,a){Object(he.a)(n)&&!Object(be.a)(n)?e(n,i):Object(ye.a)(n)&&i.filter(function(e){return Object(ke.a)(n,e.src)}).map(function(e){return t[a]=new v.b(n,{source:e.src,md5:e.md5})})})}(i,o),i}})},addNode:function(e,t,i){return this.$modal(le,{builder:i}).show({width:"xxlarge"})},saveNode:function(e,t,i){var n=this;return this.$modal(u,{node:i.clone(t),builder:i}).show({width:"xlarge"}).then(function(e){return e?n.saveElement(e,"layout"===e.type?n.findElement(e.name):void 0):e})}}};var _e=i(357),we={extends:ge,data:function(){return Object(_e.a)(window.$builder,"library")},events:{saveElement:function(e,t,i){return this.$http.post("builder/library",{id:i,element:t})},deleteElement:function(e,t,i){return this.$http.delete("builder/library",{params:{id:i}})}}},xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between uk-margin-medium"},[i("h2",{staticClass:"yo-sidebar-heading uk-margin-remove-bottom"},[e._v(e._s(e.$t("Builder")))]),e._v(" "),i("button",{staticClass:"uk-button uk-button-small uk-button-default",attrs:{type:"button"},on:{click:function(t){e.$trigger("openLibrary",e.Builder)}}},[e._v(e._s(e.$t("Library")))])]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.Builder.empty,expression:"Builder.empty"}],staticClass:"uk-text-muted"},[e._v(e._s(e.$t('Create content from pre-built elements, drag and drop items and write custom code. To add a new layout, click "Select layout" and then "Start empty". You can also save and load layouts from the Library.')))]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.Builder.empty,expression:"Builder.empty"}],staticClass:"uk-button uk-button-default uk-width-1-1",attrs:{type:"button"},on:{click:function(t){e.$trigger("openLibrary",e.Builder)}}},[e._v(e._s(e.$t("Select layout")))]),e._v(" "),i("Layout",{attrs:{node:e.Builder.node}})],1)};xe._withStripped=!0;var $e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.node?i("div",{on:{click:function(e){e.stopPropagation()}}},[i("div",{directives:[{name:"position",rawName:"v-position:top",value:e.target,expression:"target",arg:"top"}],staticClass:"uk-position-absolute uk-flex uk-flex-middle uk-position-absolute",class:"yo-builder-nav-"+e.type,on:{mouseenter:e.enter,mouseleave:e.leave}},[i("ul",{staticClass:"yo-iconnav"},[i("li",[i("a",{staticClass:"yo-builder-icon-edit",attrs:{title:e.$t("Edit"),href:"","uk-icon":"pencil"},on:{click:function(t){return t.preventDefault(),e.editNode(t)}}})]),e._v(" "),i("li",[i("a",{staticClass:"yo-builder-icon-copy",attrs:{title:e.$t("Copy"),href:"","uk-icon":"copy"},on:{click:function(t){t.preventDefault(),e.Builder.copy(e.node)}}})]),e._v(" "),"element"===e.type?i("li",[i("a",{staticClass:"yo-builder-icon-save",attrs:{title:e.$t("Save in library"),href:"","uk-icon":"push"},on:{click:function(t){t.preventDefault(),e.Builder.save(e.node)}}})]):e._e(),e._v(" "),i("li",[i("a",{staticClass:"yo-builder-icon-delete",attrs:{title:e.$t("Delete"),href:"","uk-icon":"trash"},on:{click:function(t){t.preventDefault(),e.Builder.remove(e.node)}}})])])]),e._v(" "),i("a",{directives:[{name:"position",rawName:"v-position:bottom",value:e.target,expression:"target",arg:"bottom"}],staticClass:"uk-position-absolute uk-icon-button yo-builder-icon-add",class:"yo-builder-button-"+e.type,attrs:{title:e.$t("Add"),href:"","uk-icon":"plus"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.Builder.add(e.node)},mouseenter:e.enter,mouseleave:e.leave}})]):e._e()};$e._withStripped=!0;var Ce=i(135),Oe=i(1);function je(e,t){var i=t.value,n=t.arg;requestAnimationFrame(function(){return Object(Oe.positionAt)(e,i,"center "+("top"===n?"bottom":i.offsetHeight<10?"top":"center"),"center "+n)})}function Be(e){return function(t){if(t.target===t.currentTarget||t.target===t.current)return e.call(null,t)}}var Ee={name:"Toolbar",directives:{position:{inserted:je,update:je}},inject:["Builder","Sidebar"],props:{panel:Object,type:{type:String,default:"element"}},data:function(e){var t=e.panel;return{active:e.Sidebar.panel===t,target:null}},computed:{id:function(){return(Object(Oe.attr)(this.target,"data-id")||"").replace(this.Builder.prefix,"")},node:function(){var e=this.Builder.ids[this.id],t=this.Builder.type(e).element;return this.active&&t&&e}},watch:{node:function(e,t){this.active&&(t&&this.$trigger("leavePreviewNode",t),e&&this.$trigger("hoverPreviewNode",e))}},mounted:function(){this.attach()},destroyed:function(){this.off&&this.off.forEach(function(e){return e()})},methods:{attach:function(){var e=Object(Ce.a)(Object(Oe.$$)('iframe[name*="preview-"]'));if(e){var t=e.contentDocument,i=t.body,n=t.documentElement;Object(Oe.append)(i,this.$el),this.off=[Object(Oe.on)(n,"mouseenter",'[data-id^="'+this.Builder.prefix+'"]',Be(this.enter),!0),Object(Oe.on)(n,"mouseleave",'[data-id^="'+this.Builder.prefix+'"]',Be(this.leave),!0)]}},enter:function(e){var t=e.target;this.target=this.$el.contains(t)?this.target:t,cancelAnimationFrame(this.frame)},leave:function(){var e=this;cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(function(){return e.target=!1})},editNode:function(){for(;this.Sidebar.panel!==this.panel;)this.Sidebar.stack.pop();this.$trigger("editNode",[this.node,this.Builder])}},events:{openPanel:function(e,t){this.active=this.active||this.panel===t},closePanel:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).close,i=arguments[2];!1!==t&&this.panel===i&&(this.active=!1)},readyPreview:function(){this.attach()}}},Ne=Object(o.a)(Ee,$e,[],!1,null,null,null);Ne.options.__file="modules/builder/app/components/Toolbar.vue";var Le=Ne.exports,Se={props:{panel:Object},mounted:function(){var e=new n.a({parent:this,extends:Le,propsData:{panel:this.panel}}).$mount();this.$on("hook:beforeDestroy",function(){return e.$destroy()})},events:{hoverPreviewNode:function(e,t){Object(Oe.addClass)(Ae(this,t),"yo-hover")},leavePreviewNode:function(e,t){Object(Oe.removeClass)(Ae(this,t),"yo-hover")}}};function Ae(e,t){var i=e.$el,n=e.node,a=e.$children;return n===t?i:!!a&&a.map(function(e){return Ae(e,t)}).filter(function(e){return e})[0]}var De=i(352),Pe=i(363),ze={components:{Layout:De.a},models:{Builder:Pe.a},inject:["Config"],mixins:[Se],props:{panel:Object},watch:{"Config.values":function(e){var t=e.footer,i=(t=void 0===t?{}:t).content;this.Builder.reset(i||{})}},created:function(){var e=this.Config.values.footer,t=(e=void 0===e?{}:e).content;this.Builder.prefix="footer#",this.Builder.reset(t||{}),this.Builder.$on("change",this.change)},methods:{change:function(e){this.Config.values.footer||this.$set(this.Config.values,"footer",{}),this.$set(this.Config.values.footer,"content",e),this.Config.change(e,{name:"footer.content"})}}},Te=Object(o.a)(ze,xe,[],!1,null,null,null);Te.options.__file="modules/builder/app/components/BuilderFooter.vue";var Ie=Te.exports,Me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between uk-margin-medium"},[i("h2",{staticClass:"yo-sidebar-heading uk-margin-remove-bottom"},[e._v(e._s(e.$t("Builder")))]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.page.id,expression:"page.id"}],staticClass:"uk-button uk-button-small uk-button-default",attrs:{type:"button"},on:{click:function(t){e.$trigger("openLibrary",e.Builder)}}},[e._v(e._s(e.$t("Library")))])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.Builder.empty,expression:"!Builder.empty"}],staticClass:"uk-flex uk-flex-middle uk-flex-between uk-margin"},[i("h2",{staticClass:"uk-h1 uk-text-truncate uk-margin-remove-bottom"},[e._v(e._s(e.page.title))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.Builder.modified,expression:"Builder.modified"}],staticClass:"uk-grid uk-grid-small uk-flex-middle uk-flex-nowrap uk-text-nowrap"},[i("div",[i("button",{staticClass:"uk-button uk-button-small uk-button-text",attrs:{type:"button"},on:{click:function(t){e.cancel()}}},[e._v(e._s(e.$t("Cancel")))])]),e._v(" "),i("div",[i("button",{staticClass:"uk-button uk-button-small uk-button-primary",attrs:{type:"button"},on:{click:function(t){e.save()}}},[e._v(e._s(e.$t("Save")))])])])]),e._v(" "),i("Layout",{attrs:{node:e.Builder.node}}),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!e.page.id,expression:"!page.id"}]},[e._v(e._s(e.$t("Not available on this page. The builder can only be used on static pages. It does not work on blogs, shops or other dynamically generated content.")))]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:e.page.id&&e.Builder.empty,expression:"page.id && Builder.empty"}],staticClass:"uk-text-muted"},[e._v(e._s(e.$t('Create content from pre-built elements, drag and drop items and write custom code. To add a new layout, click "Select layout" and then "Start empty". You can also save and load layouts from the Library.')))]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.page.id&&e.Builder.empty,expression:"page.id && Builder.empty"}],staticClass:"uk-button uk-button-default uk-width-1-1",attrs:{type:"button"},on:{click:function(t){e.$trigger("openLibrary",e.Builder)}}},[e._v(e._s(e.$t("Select layout")))])],1)};Me._withStripped=!0;var Ue=i(46),Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ze={name:"BuilderSection",components:{Layout:De.a},models:{Builder:Pe.a},mixins:[Se],props:{panel:Object},data:function(e){return{page:{},confirm:(0,e.$t)("The changes you made will be lost if you navigate away from this page.")}},created:function(){this.Builder.prefix="page#",this.Builder.$on("change",this.load)},methods:{load:function(e){var t=Re({content:e},Object(_e.a)(this.page,["id","catid","title"]));(this.Builder.modified||this.page.modified)&&this.$trigger("loadPreview",this.Builder.modified?{page:t}:{})},save:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Builder.node;Object(Ue.a)(t,this).then(function(i){i&&e.load(t);var n=Object(v.d)(JSON.stringify(Re({content:t},Object(_e.a)(e.page,["id","catid","title"]))));e.$http.post("page",{page:n}).then(function(){return e.Builder.reset(t)})},function(){})},cancel:function(){this.Builder.reset()}},events:{readyPreview:function(e,t){var i=t.window.$customizer,n=(void 0===i?{}:i).page;this.page=n||{},this.page.modified||this.Builder.reset(this.page.content||{})},beforeunloadPreview:function(e,t){var i=t.event;this.Builder.modified&&(i.preventDefault(),i.returnValue=!0)},closePanel:function(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).name;this.Builder.modified&&"builder"===i&&(window.confirm(this.confirm)?this.Builder.reset():t.close=!1)},close:function(){if(this.Builder.modified)return window.confirm(this.confirm)}}},qe=Object(o.a)(Ze,Me,[],!1,null,null,null);qe.options.__file="modules/builder/app/components/BuilderSection.vue";var Je=qe.exports,Fe=i(353),Ye=i(331);n.a.merge("Customizer",{components:{builder:Je,"footer-builder":Ie},models:{Library:we},events:{readyPreview:function(e,t){var i=t.document;this.document=i},hoverNode:function(e,t,i){Object(Oe.addClass)(He(t,i,this.document),"yo-hover")},leaveNode:function(e,t,i){Object(Oe.removeClass)(He(t,i,this.document),"yo-hover")},editNode:function(e,t,i){var n=this,a=Object(_e.a)(i.type(t),["title","width","fields","fieldset","panels"]);Object(he.a)(t.props)||this.$set(t,"props",{}),"name"in t.props==!1&&Object.defineProperty(t.props,"name",{get:function(){return t.name},set:function(e){return n.$set(t,"name",e)}}),this.$trigger("openPanel",Object(Ye.a)(a,{name:"node-"+i.key(t),props:{node:t,builder:i,values:t.props},heading:!1,component:Ge}))},initBuilder:function(e,t){t=Object(Ye.a)(t,window.$builder.elements)}}});var Ge={name:"BuilderPanel",extends:Fe.a,provide:function(){return{$node:this.node,Builder:this.builder}},props:{node:Object,builder:Object},events:{resetNode:function(){this.$trigger("closePanel")}}};function He(e,t,i){var n=t.ids.indexOf(e);return~n&&i&&Object(Oe.$)('[data-id="'+t.prefix+n+'"]',i)}},7:function(e,t){e.exports=UIkit}},[[241,1,0]]]);